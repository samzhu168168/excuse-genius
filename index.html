<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Optimization -->
    <title>ExcuseGenius - Free AI Excuse Generator | Get Out of Work Instantly</title>
    <meta name="description" content="Generate believable excuses for work, school, or plans in seconds. Free AI-powered excuse generator with photo evidence. Used by 14,000+ people this week.">
    <meta name="keywords" content="excuse generator, ai excuse, get out of work, sick day excuse, work excuse, free excuse generator, ai alibi">

    <!-- Open Graph (for Facebook, LinkedIn, etc.) -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://excuse-genius.vercel.app/">
    <meta property="og:title" content="ExcuseGenius - Never Run Out of Excuses">
    <meta property="og:description" content="AI-powered excuse generator with photo evidence. Free 3 uses. Join 14K+ users who got out of work this week üòÖ">
    <meta property="og:image" content="https://images.unsplash.com/photo-1599507949390-d4642738435d?auto=format&fit=crop&w=1200&h=630">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ExcuseGenius - AI Excuse Generator">
    <meta name="twitter:description" content="Generate perfect excuses with photo evidence in 5 seconds. Free to use üî•">
    <meta name="twitter:image" content="https://images.unsplash.com/photo-1599507949390-d4642738435d?auto=format&fit=crop&w=1200&h=630">

    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü§ñ</text></svg>">

    <!-- Schema.org -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "ExcuseGenius",
      "description": "AI-powered excuse generator with photo evidence",
      "url": "https://excuse-genius.vercel.app/",
      "applicationCategory": "Utility",
      "offers": {
        "@type": "Offer",
        "price": "4.99",
        "priceCurrency": "USD"
      }
    }
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes pulse { 50% { opacity: .7; } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        body { 
            font-family: 'Inter', sans-serif;
            background-color: #0f172a; 
            color: #e2e8f0; 
            -webkit-tap-highlight-color: transparent;
            background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.05) 1px, transparent 0);
            background-size: 20px 20px;
        }
        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top-color: #fff;
            border-radius: 50%;
            width: 1.5rem;
            height: 1.5rem;
            animation: spin 1s linear infinite;
        }
        .scenario-btn.active { 
            background-color: #4f46e5; 
            transform: scale(0.98);
            box-shadow: 0 0 20px rgba(79, 70, 229, 0.5);
        }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        .generate-btn-glow { box-shadow: 0 0 25px rgba(99, 102, 241, 0.6); animation: pulse 2s infinite; }
        .score-display {
            background: linear-gradient(145deg, #4f46e5, #a855f7);
            text-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col items-center p-4">
    <div id="app" class="w-full max-w-md mx-auto flex flex-col gap-8 mt-4">
        <header class="text-center space-y-2">
            <h1 class="text-5xl font-extrabold tracking-tighter text-white">ExcuseGenius ü§ñ</h1>
            <p class="text-gray-400 text-lg">Your perfect alibi, instantly.</p>
        </header>
        
        <div class="text-center -mt-4">
            <p class="text-gray-500 text-xs mb-2 tracking-widest">AS FEATURED ON</p>
            <div class="flex justify-center gap-6 opacity-60">
                <span class="text-gray-400 font-bold text-sm">Product Hunt</span>
                <span class="text-gray-400 font-bold text-sm">TikTok</span>
                <span class="text-gray-400 font-bold text-sm">Reddit</span>
            </div>
        </div>

        <section id="scenario-selection" class="w-full">
            <div class="flex justify-between items-center mb-4">
                <p class="text-white font-semibold text-lg">1. Select your crisis:</p>
                <span class="text-xs text-green-400 bg-green-900/50 px-3 py-1 rounded-full flex items-center gap-1.5">
                    <span class="relative flex h-2 w-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span><span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span></span>
                    <span id="active-users">1,204</span> users now
                </span>
            </div>
            <div class="grid grid-cols-2 gap-3">
                <button class="scenario-btn p-4 bg-slate-800 hover:bg-slate-700 rounded-xl text-white font-medium transition-all duration-200 shadow-lg border border-slate-700" data-scenario="Late for Work">üöó Late for Work</button>
                <button class="scenario-btn p-4 bg-slate-800 hover:bg-slate-700 rounded-xl text-white font-medium transition-all duration-200 shadow-lg border border-slate-700" data-scenario="Missed Deadline">‚è∞ Missed Deadline</button>
                <button class="scenario-btn p-4 bg-slate-800 hover:bg-slate-700 rounded-xl text-white font-medium transition-all duration-200 shadow-lg border border-slate-700" data-scenario="Need a Sick Day">ü§í Sick Day</button>
                <button class="scenario-btn p-4 bg-slate-800 hover:bg-slate-700 rounded-xl text-white font-medium transition-all duration-200 shadow-lg border border-slate-700" data-scenario="Family Emergency">üè† Family Emergency</button>
                <button class="scenario-btn p-4 bg-slate-800 hover:bg-slate-700 rounded-xl text-white font-medium transition-all duration-200 shadow-lg border border-slate-700" data-scenario="Tech/WFH Failure">üíª Tech Failure</button>
                <button class="scenario-btn p-4 bg-slate-800 hover:bg-slate-700 rounded-xl text-white font-medium transition-all duration-200 shadow-lg border border-slate-700" data-scenario="Bail on Plans">üëã Bail on Plans</button>
            </div>
        </section>

        <section id="generate-section" class="w-full hidden">
            <p class="text-white font-semibold text-lg mb-3">2. Generate your freedom:</p>
            <div class="bg-indigo-900/30 border border-indigo-500/30 rounded-lg p-3 mb-4 flex items-center gap-3">
                <span class="text-xl">üî•</span>
                <p class="text-sm text-indigo-200">Join <span class="font-bold text-white">14,392</span> users who got out of trouble this week.</p>
            </div>
            <button id="generate-btn" class="w-full bg-indigo-600 hover:bg-indigo-500 active:bg-indigo-700 text-white font-bold py-4 px-4 rounded-xl text-xl transition-all flex items-center justify-center border-t border-indigo-400 generate-btn-glow">
                <span id="btn-text">Generate Perfect Alibi</span>
                <div id="loader" class="spinner hidden"></div>
                <span id="loader-text" class="hidden ml-3 text-base font-normal">Starting engine...</span>
            </button>
            <p id="credits-display" class="text-center text-xs text-gray-500 mt-2">Free uses left: <span id="uses-left">3</span></p>
        </section>

        <section id="results-section" class="w-full hidden">
            <div class="bg-slate-800/50 border border-slate-700 p-5 rounded-xl shadow-2xl backdrop-blur-sm">
                <div class="flex justify-between items-center mb-4">
                     <h3 class="font-bold text-white text-xl">Your Alibi Package</h3>
                     <div id="score-card" class="score-display text-white font-bold text-xs px-3 py-1.5 rounded-full">Believability: <span id="score-value">93%</span></div>
                </div>
                <div class="bg-slate-900/70 p-4 rounded-lg border-l-4 border-indigo-500 mb-4">
                    <p id="excuse-output" class="text-gray-100 text-lg leading-relaxed"></p>
                </div>
                <div class="relative group mb-4">
                    <img id="proof-image" src="" alt="AI-generated proof" class="rounded-lg w-full h-48 object-cover bg-slate-700">
                    <div class="absolute bottom-2 right-2 bg-black/60 px-2 py-1 rounded text-xs text-gray-300">AI-Generated Evidence</div>
                </div>
                <div class="grid grid-cols-2 gap-3">
                    <button id="copy-btn" class="bg-slate-700 hover:bg-slate-600 text-white font-semibold py-3 rounded-lg transition-colors">Copy Text</button>
                    <a id="download-btn" href="#" target="_blank" class="block bg-slate-700 hover:bg-slate-600 text-white font-semibold py-3 rounded-lg text-center transition-colors">View Proof</a>
                </div>
                <div class="mt-6 pt-4 border-t border-slate-700">
                    <div class="bg-gradient-to-r from-yellow-500/10 to-amber-500/10 border-2 border-yellow-400/30 rounded-lg p-4 text-center shadow-lg">
                        <p class="text-yellow-200 text-sm mb-2 font-bold">‚ú® Want 3 more free uses?</p>
                        <button id="share-btn" class="w-full bg-yellow-500 hover:bg-yellow-400 text-black font-bold py-2.5 rounded-lg shadow-lg transform active:scale-95 transition-all">
                            Share & Unlock (+3 Uses)
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section id="social-proof" class="w-full">
            <h3 class="text-center text-gray-400 text-sm mb-4 tracking-wider">Trusted by professionals worldwide üåé</h3>
            <div class="space-y-4">
                <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-5">
                    <div class="flex items-start gap-4">
                        <img src="https://i.pravatar.cc/150?img=12" class="w-10 h-10 rounded-full" alt="">
                        <div>
                            <div class="flex gap-1 mb-1 text-yellow-400">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                            <p class="text-gray-300 text-sm italic">"Saved my job twice this month. The photo evidence is chef's kiss üëå"</p>
                            <p class="text-gray-500 text-xs mt-2 font-semibold">- Jake S., Software Engineer</p>
                        </div>
                    </div>
                </div>
                <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-5">
                    <div class="flex items-start gap-4">
                        <img src="https://i.pravatar.cc/150?img=5" class="w-10 h-10 rounded-full" alt="">
                        <div>
                            <div class="flex gap-1 mb-1 text-yellow-400">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                            <p class="text-gray-300 text-sm italic">"My boss actually believed the 'pipe burst' excuse. This AI is scary good üòÇ"</p>
                            <p class="text-gray-500 text-xs mt-2 font-semibold">- Sarah K., Marketing Manager</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div id="paywall-modal" class="fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 hidden">
        <div class="bg-slate-800 border border-slate-700 rounded-2xl p-8 max-w-sm w-full text-center shadow-2xl relative fade-in">
            <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 text-5xl">üëë</div>
            
            <div class="bg-red-500/20 border border-red-500/50 rounded-lg px-3 py-1 inline-block mb-4">
                <p class="text-red-300 text-xs font-bold">‚ö° LIMITED TIME: $4.99 (was $9.99)</p>
            </div>
            
            <h3 class="text-2xl font-bold text-white mb-2">You're a natural! üî•</h3>
            <p class="text-gray-400 mb-5">You've mastered the free tier. Join <span class="text-indigo-400 font-bold">5,247+ members</span> who never run out of excuses.</p>
            
            <div class="flex justify-center items-center gap-2 mb-5">
                <div class="flex -space-x-3">
                    <img class="w-8 h-8 rounded-full border-2 border-slate-800" src="https://i.pravatar.cc/150?img=1" alt="">
                    <img class="w-8 h-8 rounded-full border-2 border-slate-800" src="https://i.pravatar.cc/150?img=2" alt="">
                    <img class="w-8 h-8 rounded-full border-2 border-slate-800" src="https://i.pravatar.cc/150?img=3" alt="">
                </div>
                <p class="text-xs text-gray-400 self-center">+127 joined today</p>
            </div>
            
            <div class="bg-indigo-900/40 p-4 rounded-lg mb-6 text-left">
                <ul class="space-y-3 text-gray-300">
                    <li class="flex items-center gap-3">‚úÖ <span class="font-semibold">Unlimited</span> AI Generations</li>
                    <li class="flex items-center gap-3">‚úÖ <span class="font-semibold">Hyper-Local</span> Photo Evidence</li>
                    <li class="flex items-center gap-3">‚úÖ Priority 24/7 Support</li>
                    <li class="flex items-center gap-3">‚úÖ <span class="text-yellow-400 font-bold">100% Money-Back Guarantee</span></li>
                </ul>
            </div>
            
            <a href="https://samzhu168.gumroad.com/l/pjdbk" target="_blank" 
               class="block w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold py-4 px-4 rounded-xl shadow-lg shadow-indigo-600/50 transition-all mb-2 text-lg transform hover:scale-105">
                üîì Unlock Pro Access - $4.99
            </a>
            
            <p class="text-xs text-gray-500 mb-4">
                üîí Secure Checkout ‚Ä¢ üí≥ Cancel Anytime ‚Ä¢ ‚ö° Instant Access
            </p>
            
            <p class="text-sm text-red-400 mb-4 font-semibold">
                ‚è∞ Offer expires in <span id="countdown">14:59</span>
            </p>
            
            <button id="close-modal-btn" class="text-gray-500 hover:text-white text-sm">Maybe later</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const LOADING_MSG = ["Forging evidence...", "Aligning alibis...", "Consulting local transit AI...", "Adding typo for realism...", "Hacking the mainframe...", "Reticulating splines..."];
            
            let useCount = parseInt(localStorage.getItem('excuseGeniusUseCount') || '0');
            const MAX_FREE = 3;
            let selectedScenario = null;

            const els = {
                activeUsers: document.getElementById('active-users'),
                usesLeftSpan: document.getElementById('uses-left'),
                btns: document.querySelectorAll('.scenario-btn'),
                genSection: document.getElementById('generate-section'),
                genBtn: document.getElementById('generate-btn'),
                results: document.getElementById('results-section'),
                output: document.getElementById('excuse-output'),
                img: document.getElementById('proof-image'),
                downloadBtn: document.getElementById('download-btn'),
                paywall: document.getElementById('paywall-modal'),
                closeModalBtn: document.getElementById('close-modal-btn'),
                shareBtn: document.getElementById('share-btn'),
                copyBtn: document.getElementById('copy-btn'),
                loader: document.getElementById('loader'),
                btnText: document.getElementById('btn-text'),
                loaderText: document.getElementById('loader-text'),
                scoreValue: document.getElementById('score-value')
            };

            function updateCredits() {
                const left = Math.max(0, MAX_FREE - useCount);
                els.usesLeftSpan.textContent = left;
            }

            setInterval(() => {
                const current = parseInt(els.activeUsers.textContent.replace(/,/g, ''));
                const change = Math.floor(Math.random() * 5) - 2;
                els.activeUsers.textContent = (current + change).toLocaleString();
            }, 2500);

            els.btns.forEach(btn => {
                btn.addEventListener('click', () => {
                    els.btns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    selectedScenario = btn.dataset.scenario;
                    els.genSection.classList.remove('hidden');
                    els.genSection.classList.add('fade-in');
                    els.results.classList.add('hidden');
                    setTimeout(() => els.genSection.scrollIntoView({ behavior: 'smooth', block: 'center' }), 100);
                });
            });

            els.genBtn.addEventListener('click', async () => {
                if(useCount >= MAX_FREE) {
                    els.paywall.classList.remove('hidden');
                    els.paywall.classList.add('fade-in');
                    return;
                }
                setLoading(true);
                
                try {
                    const { text, believability, imageSearchTerm } = await generateText(selectedScenario);
                    
                    const imageUrl = `https://source.unsplash.com/800x600/?${encodeURIComponent(imageSearchTerm)}`;
                    
                    els.img.src = imageUrl;
                    els.downloadBtn.href = imageUrl;
                    els.output.textContent = text;
                    els.scoreValue.textContent = `${believability}%`;

                    useCount++;
                    localStorage.setItem('excuseGeniusUseCount', useCount);
                    updateCredits();

                    els.results.classList.remove('hidden');
                    els.results.classList.add('fade-in');
                    els.results.scrollIntoView({ behavior: 'smooth', block: 'center' });
                } catch (e) {
                    console.error(e);
                    alert('AI Overload: ' + e.message + ' Please try again in a moment.');
                } finally {
                    setLoading(false);
                }
            });

            async function generateText(scenario) {
                const res = await fetch('/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ scenario })
                });

                if (!res.ok) {
                    const error = await res.json();
                    throw new Error(error.details?.error?.message || error.error || 'The server had an issue.');
                }
                return await res.json();
            }

            function setLoading(isLoading) {
                els.genBtn.disabled = isLoading;
                if (isLoading) {
                    els.btnText.classList.add('hidden');
                    els.loader.classList.remove('hidden');
                    els.loaderText.classList.remove('hidden');
                    let i = 0;
                    els.loaderText.textContent = LOADING_MSG[0];
                    els.genBtn.dataset.interval = setInterval(() => {
                        i++;
                        els.loaderText.textContent = LOADING_MSG[i % LOADING_MSG.length];
                    }, 1500);
                } else {
                    els.btnText.classList.remove('hidden');
                    els.loader.classList.add('hidden');
                    els.loaderText.classList.add('hidden');
                    clearInterval(els.genBtn.dataset.interval);
                }
            }

            els.shareBtn.addEventListener('click', () => {
                const shareData = { title: 'ExcuseGenius', text: 'This AI just generated the perfect alibi for me! üî•', url: window.location.href };
                try {
                     if (navigator.share) {
                        navigator.share(shareData).then(() => {
                            unlockUses();
                            alert('Thanks for sharing! +3 uses added.');
                        });
                    } else {
                        throw new Error('Web Share API not supported');
                    }
                } catch (err) {
                    navigator.clipboard.writeText(shareData.text + ' ' + shareData.url);
                    alert('Link copied to clipboard! Share it with your friends to unlock more uses. +3 Uses Added!');
                    unlockUses();
                }
            });

            function unlockUses() {
                useCount = Math.max(0, useCount - 3);
                localStorage.setItem('excuseGeniusUseCount', useCount);
                updateCredits();
                els.paywall.classList.add('hidden');
            }

            els.closeModalBtn.addEventListener('click', () => els.paywall.classList.add('hidden'));

            els.copyBtn.addEventListener('click', (e) => {
                navigator.clipboard.writeText(els.output.textContent);
                e.target.textContent = 'Copied!';
                setTimeout(() => e.target.textContent = 'Copy Text', 2000);
            });
            
            // Countdown Timer
            let countdown = 899;
            const countdownEl = document.getElementById('countdown');
            if (countdownEl) {
                setInterval(() => {
                    if (countdown <= 0) countdown = 899;
                    const mins = Math.floor(countdown / 60);
                    const secs = countdown % 60;
                    countdownEl.textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
                    countdown--;
                }, 1000);
            }
            
            updateCredits();
        });
    </script>
</body>
</html>